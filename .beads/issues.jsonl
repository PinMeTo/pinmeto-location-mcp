{"id":"pinmeto-location-mcp-1j5","title":"Add outputSchema to all tools","description":"Missing output schema declarations. Add Zod output schemas to all tool registrations for better AI understanding and validation. Modern MCP best practice. Files: All tools in src/tools/\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] Output schemas defined for all 13 tools using Zod\n- [ ] Schemas match actual response structure\n- [ ] Tool registrations include outputSchema parameter\n- [ ] Tests added to validate output against schema\n- [ ] Tool descriptions mention output structure\n- [ ] CLAUDE.md updated with outputSchema examples\n- [ ] Manually tested with MCP Inspector (verify schema display)\n- [ ] No regressions in tool functionality","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-18T11:36:08.508063+01:00","updated_at":"2025-12-18T12:58:09.553691+01:00"}
{"id":"pinmeto-location-mcp-27l","title":"Add tool annotations (readOnlyHint)","description":"No readOnlyHint or other annotations. Add readOnlyHint: true to all tools since they're all read-only. Helps AI agents plan better. Files: All tools in src/tools/\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] readOnlyHint: true added to all 13 tools\n- [ ] Tool annotations verified in tool registrations\n- [ ] Tests updated to verify annotations present\n- [ ] CLAUDE.md updated with annotation conventions\n- [ ] Manually tested with MCP Inspector (verify annotations visible)\n- [ ] No regressions in tool functionality","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T11:36:08.818779+01:00","updated_at":"2025-12-18T16:18:08.906888+01:00","closed_at":"2025-12-18T16:18:08.906888+01:00","close_reason":"Closed","dependencies":[{"issue_id":"pinmeto-location-mcp-27l","depends_on_id":"pinmeto-location-mcp-2bp","type":"blocks","created_at":"2025-12-18T15:39:28.338938+01:00","created_by":"daemon"}]}
{"id":"pinmeto-location-mcp-2bp","title":"PR #17 Review Fixes - Tool Annotations","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T15:37:16.399934+01:00","updated_at":"2025-12-18T15:53:51.71008+01:00","closed_at":"2025-12-18T15:53:51.71008+01:00","close_reason":"Closed","dependencies":[{"issue_id":"pinmeto-location-mcp-2bp","depends_on_id":"pinmeto-location-mcp-6kn","type":"blocks","created_at":"2025-12-18T15:37:45.610474+01:00","created_by":"daemon"},{"issue_id":"pinmeto-location-mcp-2bp","depends_on_id":"pinmeto-location-mcp-afq","type":"blocks","created_at":"2025-12-18T15:37:45.724351+01:00","created_by":"daemon"},{"issue_id":"pinmeto-location-mcp-2bp","depends_on_id":"pinmeto-location-mcp-8a6","type":"blocks","created_at":"2025-12-18T15:37:45.837018+01:00","created_by":"daemon"},{"issue_id":"pinmeto-location-mcp-2bp","depends_on_id":"pinmeto-location-mcp-3jl","type":"blocks","created_at":"2025-12-18T15:37:45.948766+01:00","created_by":"daemon"}]}
{"id":"pinmeto-location-mcp-2eu","title":"Create workflow helper tools","description":"Users manually orchestrate multi-step workflows. Create analyze_location_performance tool combining multiple network insights in one call. File: src/tools/helpers/workflows.ts (new)","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-18T11:36:10.15086+01:00","updated_at":"2025-12-18T11:36:10.15086+01:00"}
{"id":"pinmeto-location-mcp-2pt","title":"Add response caching for frequently accessed data","description":"No caching of location data. Add simple TTL cache (5-10 minutes) for get_locations and get_location. Reduces API load and improves response time. File: src/mcp_server.ts","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-18T11:36:10.480664+01:00","updated_at":"2025-12-18T11:36:10.480664+01:00"}
{"id":"pinmeto-location-mcp-33c","title":"Standardize date format consistency across tools","description":"Inconsistent date formats: keywords use YYYY-MM while insights use YYYY-MM-DD. Standardize all tools to YYYY-MM-DD for consistency. Breaking change but improves UX. Files: src/tools/networks/google.ts (keywords tools)\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] All tools use YYYY-MM-DD format\n- [ ] Keywords tools updated from YYYY-MM to YYYY-MM-DD\n- [ ] Input schemas updated with consistent date format\n- [ ] Date parsing logic updated\n- [ ] Version bump documented (breaking change if needed)\n- [ ] Migration guide created if breaking change\n- [ ] Tests updated with new date format\n- [ ] Tests verify format consistency across tools\n- [ ] Tool descriptions updated with date format\n- [ ] CLAUDE.md updated with date format standard\n- [ ] Manually tested all date inputs with MCP Inspector\n- [ ] No regressions in date handling","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T12:38:24.729235+01:00","updated_at":"2025-12-18T13:02:21.95008+01:00"}
{"id":"pinmeto-location-mcp-3jl","title":"Fix annotation test to verify readOnlyHint","description":"Test 'should register all 15 tools with readOnlyHint annotations' only checks expect(server).toBeDefined() - doesn't actually verify annotations exist on tools.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T15:37:27.431911+01:00","updated_at":"2025-12-18T15:53:18.126117+01:00","closed_at":"2025-12-18T15:53:18.126117+01:00","close_reason":"Closed"}
{"id":"pinmeto-location-mcp-3zf","title":"Create search_locations lightweight discovery tool","description":"Create lightweight search/discovery tool for finding locations by name, address, or ID patterns. Complements get_locations by providing fuzzy search without fetching full location data. Files: src/tools/locations/locations.ts, src/mcp_server.ts\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] search_locations tool implemented and registered\n- [ ] Input schema with search query and optional filters\n- [ ] Output schema defined (location ID, name, address summary)\n- [ ] Tool annotations added (readOnlyHint: true)\n- [ ] Pagination support (limit parameter)\n- [ ] Tests added for search functionality\n- [ ] Tests cover edge cases (empty results, special characters)\n- [ ] Tool description clear and actionable\n- [ ] CLAUDE.md updated with search examples\n- [ ] Manually tested with MCP Inspector\n- [ ] No regressions in existing location tools","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-18T11:36:07.298439+01:00","updated_at":"2025-12-18T12:58:09.80878+01:00"}
{"id":"pinmeto-location-mcp-43x","title":"Add specific error handling for authentication failures","description":"The _getAndStoreToken() method has no try-catch block. Authentication errors (invalid credentials, OAuth app revoked) are caught by the broad catch in makePinMeToRequest and appear as generic 'Unable to fetch data' instead of 'Invalid API credentials'.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T16:06:16.387076+01:00","updated_at":"2025-12-18T16:06:16.387076+01:00","dependencies":[{"issue_id":"pinmeto-location-mcp-43x","depends_on_id":"pinmeto-location-mcp-5gt","type":"blocks","created_at":"2025-12-18T16:06:25.938486+01:00","created_by":"daemon"}]}
{"id":"pinmeto-location-mcp-5el","title":"Add input validation for date ranges","description":"No validation that 'from' date \u003c 'to' date. Add Zod refinements to validate date ranges before API calls. Improves error messages and prevents invalid API requests. Files: All tools with date parameters in src/tools/\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] Zod refinements added to all tools with date ranges\n- [ ] Validation ensures from \u003c to\n- [ ] Validation checks date format (YYYY-MM-DD)\n- [ ] Validation checks dates are not in future (if applicable)\n- [ ] Clear error messages for validation failures\n- [ ] Tests added for date validation logic\n- [ ] Tests cover edge cases (equal dates, reversed dates, invalid formats)\n- [ ] Tool descriptions mention date validation\n- [ ] CLAUDE.md updated with date validation examples\n- [ ] Manually tested invalid dates with MCP Inspector\n- [ ] No regressions in valid date handling","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T12:38:25.006254+01:00","updated_at":"2025-12-18T13:02:21.674932+01:00"}
{"id":"pinmeto-location-mcp-5gt","title":"Return structured errors instead of null from API requests","description":"The makePinMeToRequest method catches all exceptions and returns null, making it impossible to distinguish between auth failures (401), not found (404), rate limiting (429), server errors (500/503), network timeouts, and DNS failures. Should return structured error objects with error codes.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T16:06:16.106816+01:00","updated_at":"2025-12-18T16:06:16.106816+01:00"}
{"id":"pinmeto-location-mcp-6kn","title":"Fix CLAUDE.md env loading documentation","description":"CLAUDE.md states env vars are loaded via process.loadEnvFile() but this was removed. Update to reflect --env-file=.env.local approach in npm scripts.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-18T15:37:26.596608+01:00","updated_at":"2025-12-18T15:52:08.578352+01:00","closed_at":"2025-12-18T15:52:08.578352+01:00","close_reason":"Closed"}
{"id":"pinmeto-location-mcp-7ru","title":"Add comprehensive tool-level testing","description":"Current tests only cover core server. MCP requirement: 'Comprehensive testing should cover functional, integration, security, performance.' Add tool-level tests with mock API responses for all 13 tools. Files: tests/ directory\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] Test files created for each tool category (locations, networks)\n- [ ] Mock API responses for all endpoints\n- [ ] Tests cover successful responses\n- [ ] Tests cover error scenarios (401, 404, 500, timeout)\n- [ ] Tests cover pagination edge cases\n- [ ] Tests cover aggregation logic\n- [ ] Tests verify output schemas match responses\n- [ ] Tests verify tool annotations present\n- [ ] Code coverage report generated (aim for \u003e80%)\n- [ ] All tests passing\n- [ ] Test documentation added to README\n- [ ] CLAUDE.md updated with testing conventions\n- [ ] CI/CD configuration supports test suite","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T12:38:25.28202+01:00","updated_at":"2025-12-18T13:02:21.403361+01:00"}
{"id":"pinmeto-location-mcp-8a6","title":"Add test for Initialize handler capabilities fix","description":"The bug fix returning serverInfo.capabilities instead of request.params.capabilities has no test coverage. Add test verifying server returns its own capabilities, not client's.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T15:37:27.146519+01:00","updated_at":"2025-12-18T15:53:18.127+01:00","closed_at":"2025-12-18T15:53:18.127+01:00","close_reason":"Closed"}
{"id":"pinmeto-location-mcp-8et","title":"Add pagination/filtering to get_locations","description":"Add pagination support (limit, offset) and filtering capabilities to get_locations tool. Currently fetches all locations with hardcoded pagesize=1000. Files: src/tools/locations/locations.ts\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] Limit parameter added (default: 50, max: 1000)\n- [ ] Offset parameter added for pagination\n- [ ] Filter parameters added (status, type, etc.)\n- [ ] Response includes pagination metadata (has_more, total_count)\n- [ ] Output schema updated with pagination fields\n- [ ] Tests added for pagination logic\n- [ ] Tests cover edge cases (limit=0, large offsets)\n- [ ] Tool description updated with pagination examples\n- [ ] CLAUDE.md updated with pagination patterns\n- [ ] Manually tested with MCP Inspector\n- [ ] No regressions in get_locations functionality","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-18T11:36:07.006914+01:00","updated_at":"2025-12-18T12:58:10.07427+01:00"}
{"id":"pinmeto-location-mcp-9wk","title":"Track pagination progress and report partial data context","description":"makePaginatedPinMeToRequest silently continues on partial failure, returning partial data with no context about how incomplete it is (10% vs 99%). Users may make decisions based on incomplete data without knowing the severity. Should track page numbers and provide context about what was successfully fetched.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T16:06:16.660636+01:00","updated_at":"2025-12-18T16:06:16.660636+01:00"}
{"id":"pinmeto-location-mcp-adi","title":"Migrate to structured content (type: json)","description":"Returns plain text JSON strings instead of structured data. Migrate from type:'text' to type:'json' for more efficient parsing. Modern MCP SDK feature. Files: All tools in src/tools/\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] All tools return structured content (type: 'json')\n- [ ] Response format preserved (data structure unchanged)\n- [ ] JSON parsing tested by clients\n- [ ] Output schemas align with structured content\n- [ ] Tests verify structured content format\n- [ ] formatListResponse() updated if needed\n- [ ] Tool descriptions note structured content support\n- [ ] CLAUDE.md updated with structured content examples\n- [ ] Manually tested with MCP Inspector (verify parsing)\n- [ ] Backward compatibility verified or documented\n- [ ] No regressions in tool functionality","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T11:36:09.147196+01:00","updated_at":"2025-12-18T12:58:32.939315+01:00"}
{"id":"pinmeto-location-mcp-afq","title":"Fix typo 'aggregration' in google.ts","description":"In get_all_google_insights tool description, 'no aggregration' should be 'no aggregation'","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T15:37:26.871023+01:00","updated_at":"2025-12-18T15:51:49.987231+01:00","closed_at":"2025-12-18T15:51:49.987231+01:00","close_reason":"Closed"}
{"id":"pinmeto-location-mcp-c4p","title":"Optimize response format to remove token waste","description":"Optimize response format to remove token waste. Review all tool responses for unnecessary verbosity, redundant fields, or inefficient formatting. Files: All tools in src/tools/, src/helpers.ts\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] Response analysis completed (token usage measured)\n- [ ] Unnecessary fields removed or made optional\n- [ ] Verbose metadata reduced\n- [ ] formatListResponse() optimized if needed\n- [ ] Output schemas updated to match optimized responses\n- [ ] Token reduction measured and documented (before/after)\n- [ ] Tests updated for optimized responses\n- [ ] Tests verify no data loss from optimization\n- [ ] Tool descriptions mention response optimization\n- [ ] CLAUDE.md updated with token efficiency patterns\n- [ ] Manually tested optimized responses with MCP Inspector\n- [ ] No functional regressions","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T11:36:08.182926+01:00","updated_at":"2025-12-18T13:02:22.234173+01:00"}
{"id":"pinmeto-location-mcp-cyi","title":"Add YoY functionality to atomic network insights tools","description":"Add optional YoY comparison parameters to all 6 atomic insights tools (get_google_location_insights, get_facebook_location_insights, get_apple_location_insights + all variants). When compareYoY=true, fetch both current and previous year data, calculate change %, and return structured comparison. Response includes current/previous metrics, absolute change, percent change, and trend. Files: src/tools/networks/google.ts, facebook.ts, apple.ts\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] compareYoY parameter added to all 6 insights tools\n- [ ] previousYearFrom and previousYearTo parameters added\n- [ ] YoY calculation logic implemented in helper function\n- [ ] Response structure includes current/previous/change\n- [ ] Output schemas updated with YoY comparison structure\n- [ ] Tool annotations maintained (readOnlyHint: true)\n- [ ] Tests added for YoY logic in each tool\n- [ ] Tests cover edge cases (missing data, equal values, negative changes)\n- [ ] Tool descriptions updated with YoY parameter docs\n- [ ] CLAUDE.md updated with YoY usage examples\n- [ ] Manually tested YoY with MCP Inspector (all 6 tools)\n- [ ] No regressions in non-YoY mode","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-18T12:52:54.125705+01:00","updated_at":"2025-12-18T12:59:11.512861+01:00"}
{"id":"pinmeto-location-mcp-h7q","title":"Add progress reporting for long operations","description":"No feedback during long-running paginated requests (5000 locations = 10-30 seconds). Add progress notifications in makePaginatedPinMeToRequest. File: src/mcp_server.ts","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-18T11:36:09.807945+01:00","updated_at":"2025-12-18T11:36:09.807945+01:00"}
{"id":"pinmeto-location-mcp-ikt","title":"Create get_combined_location_insights_yoy tool","description":"Create new combined YoY tool that fetches insights from multiple networks (Google, Facebook, Apple) and returns unified YoY comparison. Reduces multi-network YoY workflow from 6 calls to 1 call (83% reduction). Takes current/previous year date ranges, networks array, and aggregation. Returns per-network and total comparison with change %, trends. Files: src/tools/networks/combined.ts (new), src/mcp_server.ts\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] get_combined_location_insights_yoy tool created\n- [ ] Tool registered in src/mcp_server.ts\n- [ ] Input schema with date ranges and networks parameter\n- [ ] Output schema defined (comparison structure)\n- [ ] Fetches from all networks in parallel (Promise.all)\n- [ ] Calculates YoY changes (absolute, percent, trend)\n- [ ] Returns per-network and total summaries\n- [ ] Tool annotations added (readOnlyHint: true)\n- [ ] Tests added for combined YoY logic\n- [ ] Tests cover edge cases (missing data, network failures)\n- [ ] Tool description clear with usage example\n- [ ] CLAUDE.md updated with YoY workflow examples\n- [ ] Manually tested with MCP Inspector\n- [ ] No regressions in existing tools","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-18T12:52:54.394399+01:00","updated_at":"2025-12-18T12:59:11.254358+01:00"}
{"id":"pinmeto-location-mcp-ob7","title":"Improve tool naming consistency","description":"Inconsistent patterns (get_all_google_insights vs get_google_keywords). Standardize to {network}_{scope}_{resource} pattern. Add pinmeto_ service prefix per MCP best practice. Breaking change - needs versioning strategy. Files: src/tools/networks/\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] All tools renamed with pinmeto_ prefix\n- [ ] Naming pattern {service}_{network}_{action}_{resource} applied\n- [ ] Version bump documented (breaking change)\n- [ ] Migration guide created for existing users\n- [ ] Tests updated with new tool names\n- [ ] All tool registrations updated in src/mcp_server.ts\n- [ ] Tool descriptions reference new names\n- [ ] CLAUDE.md updated with naming conventions\n- [ ] README updated with versioning info\n- [ ] Manually tested all renamed tools with MCP Inspector\n- [ ] No functionality regressions","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T11:36:09.479805+01:00","updated_at":"2025-12-18T12:58:32.657358+01:00"}
{"id":"pinmeto-location-mcp-rdr","title":"Fix hardcoded PACKAGE_VERSION in mcp_server.ts","description":"Currently PACKAGE_VERSION is hardcoded in src/mcp_server.ts:33 and must be manually updated on each release. This creates risk of version drift where the code reports a different version than package.json. Need to replace hardcoded constant with dynamic import from package.json to make it the single source of truth. Must be completed before next release to ensure version consistency.","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-18T13:28:44.779145+01:00","updated_at":"2025-12-18T13:28:51.817186+01:00"}
{"id":"pinmeto-location-mcp-vri","title":"Improve error messages with actionable guidance","description":"Error messages are generic ('Unable to fetch insights data'). Improve with actionable guidance, error codes, and specific next steps. MCP best practice: provide helpful, specific error messages. Files: All tools in src/tools/, src/mcp_server.ts\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] Error messages include specific failure reasons\n- [ ] Actionable next steps provided (check auth, retry, etc.)\n- [ ] HTTP status codes included where applicable\n- [ ] Rate limit errors have clear guidance\n- [ ] Authentication errors specify auth method\n- [ ] Network errors distinguish timeout vs connection failure\n- [ ] Tests added for error scenarios\n- [ ] Tests verify error message quality\n- [ ] Tool descriptions mention error handling\n- [ ] CLAUDE.md updated with error handling patterns\n- [ ] Manually tested error scenarios with MCP Inspector\n- [ ] No regressions in successful path functionality","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T11:36:07.592312+01:00","updated_at":"2025-12-18T12:58:33.216033+01:00"}
{"id":"pinmeto-location-mcp-vxb","title":"Add response format flexibility (JSON vs Markdown)","description":"MCP best practice: 'All tools that return data should support multiple formats.' Add response_format parameter (json/markdown) to all tools. JSON for programmatic processing, Markdown for human readability. Files: All tools in src/tools/\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] response_format parameter added to all 13 tools\n- [ ] JSON format returns structured data\n- [ ] Markdown format returns human-readable text with headers/lists\n- [ ] Output schemas support both formats\n- [ ] Default format documented per tool\n- [ ] Tests added for both response formats\n- [ ] Tests verify format switching works correctly\n- [ ] Tool descriptions updated with format examples\n- [ ] CLAUDE.md updated with format selection guidance\n- [ ] Manually tested both formats with MCP Inspector\n- [ ] No regressions in tool functionality","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-18T12:38:24.460065+01:00","updated_at":"2025-12-18T12:58:32.387416+01:00"}
{"id":"pinmeto-location-mcp-zck","title":"Add rate limiting and retry logic","description":"Add rate limiting detection and retry logic with exponential backoff. Handle 429 responses gracefully. Respect API rate limits. Files: src/mcp_server.ts, src/helpers.ts\n\n---\n## Definition of Done\nBefore closing this bead, ensure:\n- [ ] Rate limit detection implemented (429 status code)\n- [ ] Retry logic with exponential backoff added\n- [ ] Configurable retry attempts and delays\n- [ ] Retry-After header respected if present\n- [ ] Rate limit errors have actionable messages\n- [ ] Circuit breaker pattern considered\n- [ ] Tests added for rate limiting scenarios\n- [ ] Tests verify retry logic with mocked 429 responses\n- [ ] CLAUDE.md updated with rate limiting behavior\n- [ ] Manually tested rate limit handling\n- [ ] Tool descriptions mention retry behavior\n- [ ] No infinite retry loops","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-18T11:36:07.886561+01:00","updated_at":"2025-12-18T13:02:22.520299+01:00"}
